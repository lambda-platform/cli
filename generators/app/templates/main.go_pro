package main

import (
    "github.com/labstack/echo/v4"

    /*
    	|----------------------------------------------
    	| Generated Models
    	|----------------------------------------------
    */
    "github.com/lambda-platform/lambda"
    "<%= projectName %>/models/form/caller"
    "<%= projectName %>/models/form/validationCaller"
    gridCaller "<%= projectName %>/models/grid/caller"

    /*
    	|----------------------------------------------
    	| Graphql
    	|----------------------------------------------
    */
    //"<%= projectName %>/graph"

    /*
    	|----------------------------------------------
    	| PRO MODULES
    	|----------------------------------------------
    */
    "github.com/lambda-platform/crudlogger"
    "github.com/lambda-platform/notify"
    "github.com/lambda-platform/arcGIS"
    "github.com/lambda-platform/dataanalytic"
    "github.com/lambda-platform/chart"
    "github.com/lambda-platform/moqup"

    /*
    	|----------------------------------------------
    	| APP, APP ADMIN
    	|----------------------------------------------
    */
    "<%= projectName %>/app"
    "<%= projectName %>/appAdmin"
)

func main() {

    /*
    	|----------------------------------------------
    	| Lambda Platform
    	|----------------------------------------------
    */
    lambda := lambda.New(&lambda.Settings{
        ModuleName:      "<%= projectName %>",
        GetGridMODEL:    gridCaller.GetMODEL,
        GetFormMODEL:    caller.GetMODEL,
        GetFormMessages: validationCaller.GetMessages,
        GetFormRules:    validationCaller.GetRules,
        /*
        	|----------------------------------------------
        	| PRO MODULES middlewares based on KRUD
        	|----------------------------------------------
        */
        KrudMiddleWares: []echo.MiddlewareFunc{
            crudlogger.MW(),
            notify.MW(),
            arcGIS.MW(caller.GetMODEL, gridCaller.GetMODEL),
        },
        //Back-End permission validation
        KrudWithPermission: true,
    })

    /*
    	|----------------------------------------------
    	| Graphql
    	|----------------------------------------------
    */
    //graph.Set(lambda.Echo)

    /*
    	|----------------------------------------------
    	| PRO MODULES
    	|----------------------------------------------
    */
    crudlogger.Set(lambda.Echo)
    notify.Set(lambda.Echo)
    arcGIS.Set(lambda.Echo)
    dataanalytic.Set(lambda.Echo)
    chart.Set(lambda.Echo)
    moqup.Set(lambda.Echo)

    /*
    	|----------------------------------------------
    	| APP, APP ADMIN
    	|----------------------------------------------
    */
    app.Set(lambda.Echo)
    appAdmin.Set(lambda.Echo, true)

    lambda.Start()

}
